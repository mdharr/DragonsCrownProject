<div class="wrapper">
  <div *ngIf="hasCurrentSpell" class="spell-counter spell-counter-top-left">
    <h6>Rune Spells: {{ spellKey.length - spells.length }} / {{ spellKey.length }}</h6>
    <h6>Score: {{ currentScore }}</h6>
  </div>
  <div *ngIf="hasCurrentSpell" class="spell-counter spell-counter-top-right">
    <button class="option-buttons" (click)="restart()">Restart</button>
  </div>
  <div *ngIf="hasCurrentSpell" class="current-spell-wrapper">
    <div *ngIf="!noSpellsRemaining" class="spell-content">
      <label for="spellRunes">{{ currentSpell.name }}</label>
      <div class="rune-container" (drop)="dropRune($event)" (dragover)="allowDrop($event)">
        <img *ngFor="let runeId of currentSpell.runes; let i = index;"
        class="rune-image"
        [src]="getRuneImageUrl(runeId)"
        alt="rune.png"
        [draggable]="false">
      </div>
    </div>
    <div *ngIf="noSpellsRemaining" class="no-spells">
      <h6>No spells remaining.</h6>
    </div>
  </div>
  <div class="spell-result" *ngIf="revealSpell">
    <div class="icon-wrapper">
      <img class="icon-image" src="https://atlus.com/dragonscrown/img/system/arch.png" alt="">
    </div>
    <div class="spell-details">
      <h5>{{ currentSpell.name }}</h5>
      <p>{{ currentSpell.description }}</p>
    </div>
  </div>
  <div class="footer-container">
    <div class="button-and-runes-container">
      <div class="carried-runes">
        <img *ngFor="let carriedRune of carriedRunes; let i = index;"
        class="rune"
        [src]="carriedRune.imageUrl"
        alt=""
        (click)="selectRune(carriedRune.id)"
        [style.--wave-delay]="getDelay(i) + 's'"
        [ngClass]="{'selected': isSelected(carriedRune.id), 'no-animation': !hasCurrentSpell}"
        [draggable]="true"
        (dragstart)="dragStart($event, carriedRune.id)">
      </div>
      <div class="option-buttons-container">
        <button class="option-buttons" (click)="getSpell()" [disabled]="!isNextAvailable()">{{ spells.length === 0 ? 'End' : hasCurrentSpell ? 'Next' : 'Begin' }}</button>
        <button id="evaluate-button" class="option-buttons" (click)="evaluateCombination(currentRunes, userRunes)" [disabled]="!isSelectionComplete()">Evaluate</button>
      </div>
    </div>
  </div>
</div>
